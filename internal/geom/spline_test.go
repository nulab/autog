package geom

import (
	"fmt"
	"testing"
)

func TestSpline(t *testing.T) {
	var path = []P{
		{326.50, 8.29}, {259.00, 154.00}, {162.00, 205.00}, {162.00, 256.00}, {251.00, 409.00}, {251.00, 460.00}, {215.75, 466.38},
	}
	tanv1 := P{}
	tanv2 := P{}
	// 	tanv1 := P{316.50, 28.29}
	//	tanv2 := P{225.75, 464.38}

	poly := []P{
		{305, 1}, {305, 52}, {181, 52}, {181, 103}, {259, 103}, {259, 154}, {1, 154}, {1, 205}, {78, 205}, {78, 256},
		{137, 256}, {137, 307}, {18, 307}, {18, 358}, {175, 358}, {175, 409}, {251, 409}, {251, 460}, {174, 460}, {174, 511},
		{341, 511}, {341, 460}, {471, 460}, {471, 409}, {367, 409}, {367, 358}, {240, 358}, {240, 307}, {391, 307}, {391, 256},
		{162, 256}, {162, 205}, {282, 205}, {282, 154}, {318, 154}, {318, 103}, {345, 103}, {345, 52}, {348, 52}, {348, 1},
	}

	barriers := []Segment{}
	for i := 1; i < len(poly); i++ {
		barriers = append(barriers, Segment{poly[i-1], poly[i]})
	}
	barriers = append(barriers, Segment{poly[len(poly)-1], poly[0]})

	ctrls := FitSpline(path, tanv1, tanv2, barriers)
	for _, c := range ctrls {
		fmt.Println(c.String())
	}
}
